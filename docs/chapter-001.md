
## Chapter 1. 코틀린이란 무엇이며, 왜 필요한가?

자바 플랫폼에서 돌아가는 새로운 프로그래밍 언어이다. 
간결하고 실용적이며 자바 코드와의 상호 운용성(interoperability)을 중시한다. 

### 1.2. 코틀린 주요 특성

#### 1.2.1. 대상 플랫폼

* 서버, 안드로이드 등 자바가 실행되는 모든 곳
* 코틀린의 주목적은 모든 용도에 적합하면서도 더 간결하고 생성적이며 안전한 대체 언어를 제공하는 것
* 코틀린을 도입하면 더 적은 코드로 더 편하게 프로그래머의 목표를 달성할 수 있다.
* 코틀린이 활용되는 곳은 다음과 같다.
    * 서버 상의 코드, 특히 웹 어플리케이션의 백엔드
    * 안드로이드 디바이스에서 실행되는 모바일 어플리케이션
* 자바뿐만 아니라 자바스크립트로도 코틀린을 컴파일할 수 있다.
* 코틀린 코드를 브라우저나 노드에서 실행할 수 있다.

#### 1.2.2. 정적 타입 지정 언어

* 코틀린도 정적 타입(static typed) 지정 언어이다. 
* 정적 타입 지정 언어란?
    * 모든 프로그램 구성 요소의 타입을 컴파일 시점에 알 수 있다.
    * 객체의 필드나 메소드를 사용할 때마다 컴파일러가 타입을 검증해준다.
* 코틀린 컴파일러가 문맥으로부터 변수 타입을 자동으로 유추할 수 있기 때문에 프로그래머는 타입 선언을 생략해도 된다.
    * 타입 추론 - 컴파일러가 문맥을 고려해 변수 타입을 결정하는 기능

```kt
var x = 1
```

* 정적 타입 지정 언어는 다음과 같은 장점을 갖는다.
    * 성능 - 실행 시점에 어떤 메소드를 호출할지 알아내는 과정이 필요 없다. 메소드 호출이 빠르다.
    * 신뢰성 - 컴팡이러가 프로그램의 정확성을 검증하기 때문에 실행 시 프로그램이 오류로 중단될 가능성이 더 적다.
    * 유지 보수성 - 코드에서 다루는 객체가 어떤 타입에 속하는지 알 수 있기 때문에 처음 보는 코드를 다룰 때도 더 쉽다.
    * 도구 지원 - 정적 타입 지정을 하면 더 안전하게 리팩토링(refactoring)할 수 있다.
* 타입 추론을 지원하므로 프로그래머가 직접 타입을 선언하는 불편함이 사라진다.
* 널이 될 수 있는 타입(nullable type)을 지원한다.
    * 컴파일 시점에 널 포인트 예외가 발생할 수 있는지 여부를 검사할 수 있다.
    * 프로그램의 신뢰성을 높일 수 있다.

#### 1.2.3. 함수형 프로그래밍과 객체 지향 프로그래밍

* 일급 시민인 함수
    * 함수를 일반 값처럼 다룰 수 있다.
    * 함수를 변수에 저장할 수 있다.
    * 함수를 인자로 다른 함수에게 전달할 수 있다.
    * 함수에서 새로운 함수를 만들어서 반환할 수 있다.
* 불변성
    * 일단 만들어지면 내부 상태가 절대로 바뀌지 않는 불변 객체를 사용해 프로그램을 작성한다.
* 부수 효과(side effect) 없음
    * 입력이 같으면 항상 같은 출력을 내놓는다.
    * 다른 객체의 상태를 변경하지 않는다.
    * 함수 외부나 다른 바깐 환경과 상호 작용하지 않는 순수 함수(pure function)를 사용한다.

* 함수형 스타일로 코드를 작성하면 다음과 같은 장점이 있다.
    * 함수형 코드는 그에 상응하는 명령형 코드에 비해 더 간결하다.
    * 함수를 값처럼 활용할 수 있으므로 더 강력한 추상화를 할 수 있다.
    * 다중 스레드를 사용해도 안전하다.
        * 다중 스레드 프로그램에서는 적절한 동기화 없이 같은 데이터를 여러 스레드가 변경하는 경우 가장 많은 문제가 생긴다.'
    * 테스트하기 쉽다.
        * 부수 효과가 있는 함수는 그 함수를 실행할 때 필요한 전체 환경을 구성하는 준비 코드가 따로 필요하다.
        * 순수 함수는 그런 준비 없이 독립적으로 테스트할 수 있다.

#### 1.2.4. 무료 오픈소스

* 코틀린 언어와 컴파일러, 라이브러리 및 코틀린과 관련된 모든 도구는 모두 오픈소스이다.

### 1.3. 코틀린 응용

#### 1.3.1. 코틀린 서버 프로그래밍

* 브라우저에서 HTML 페이지를 돌려주는 웹 어플리케이션
* 모바일 어플리케이션에게 HTTP를 통해 JSON API를 제공하는 백엔드 어플리케이션
* RPC 프로토콜을 통해 서로 통신하는 작은 서비스들로 이뤄진 마이크로서비스

#### 1.3.2. 코틀린 안드로이드 프로그래밍

* 코틀린 언어의 득성과 안드로이드 프레임워크의 특별한 컴파일러 플로그인 지원을 조합하면 안드로이드 어플리케이션 개발의 생산성을 높일 수 있다.

### 1.4. 코틀린 철학

#### 1.4.1. 실용성

* 코틀린 설계는 대규모 시스템을 개발해 본 다년간의 IT 업계 경험을 바탕으로 이뤄졌다.
* 코틀린은 어느 특정 프로그래밍 스타일이나 패러다임을 사용할 것을 강제로 요구하지 않는다.

#### 1.4.2. 간결성

* 개발자는 코드를 새로 작성하는 시간보다 기존 코드를 읽는 시간이 더 길다.
* 코드가 더 간단하고 간결할수록 내용을 파악하기 쉽다. 
* 코틀린은 프로그래머가 작성하는 코드에서 의미가 없는 부분을 줄이고 언어가 요구하는 구조를 만족시키기 위해 부수적인 요소를 줄였다. 

#### 1.4.3. 안정성

* 프로그램에서 발생할 수 있는 오류 중에서 일부 유형의 오류를 프로그램 설계가 원천적으로 방지해준다.
    * 더 큰 안전성을 얻기 위해서는 프로그램에 더 많은 정보를 붙여야 한다.
    * 안정성과 생산성 사이에는 트레이드오프 관계가 성립한다.
* 컴파일 시점 검사를 통해 오류를 더 많이 방지해준다.
    * NPE 를 없애기 위해 노력한다.
    * null을 다루기 위한 편리한 방법을 제공한다.
* CCE(ClassCastException)을 방지한다.
    * 다른 타입으로 캐스팅하기 전에 미리 검사를 수행하도록 컴파일러가 이를 방지한다.

#### 1.4.4. 상호 운용성

* 자바 메소드를 호출하는 것이 가능하다.
* 자바 클래스를 상속(inherit), 확장(extend)하는 것이 가능하다.
* 인터페이스를 구현(implement)하는 것이 가능하다.
* 다음과 같은 동작이 가능하다.
    * 자바와 코틀린 소스 파일을 자유롭게 내비게이션 할 수 있다.
    * 여러 언어로 이뤄진 프로젝트를 디버깅하고 서로 다른 언어로 작성된 코드를 언어와 관계없이 한 단계식 실행할 수 있다.
    * 자바 메소드를 리팩토링해도 그 메소드와 관련 있는 코틀린 코드까지 제대로 변경된다.
    * 역으로 코틀린 메소드를 리팩토링해도 자바 코드까지 모두 자동으로 변경된다.

### 1.5. 코틀린 도구 사용

#### 1.5.1. 코틀린 코드 컴파일

* .kt 확장자를 파일에 붙힌다.
* 코틀린 소스 코드를 분석해서 .class 파일을 만들어낸다.
* 만들어진 .class 파일은 개발 중인 어플리케이션의 유형에 맞는 표준 패키징 과정을 거쳐 실행될 수 있다.
* 코틀린 컴파일러로 컴파일한 코드는 코틀린 런타임 라이브러리에 의존한다.
* 런타임 라이브러리에는 코틀린 자체 표준 라이브러리 클래스와 코틀린에서 자바 API 기능을 확장한 내용이 들어있다.
* 코틀린으로 컴파일한 어플리케이션을 배포할 때는 런타임 라이브러리도 함께 배포해야 된다.
* 메이븐, 그레이들, 앤트 등의 빌드 시스템을 사용하면 코틀린 런타임을 함께 포함시켜준다.
